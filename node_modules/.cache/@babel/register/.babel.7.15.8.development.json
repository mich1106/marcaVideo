{
  "{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\MICHELLE\\\\Desktop\\\\videoClase\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\MICHELLE\\\\Desktop\\\\videoClase\",\"filename\":\"C:\\\\Users\\\\MICHELLE\\\\Desktop\\\\videoClase\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\MICHELLE\\\\Desktop\\\\videoClase\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.8": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "C:\\Users\\MICHELLE\\Desktop\\videoClase\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "C:\\Users\\MICHELLE\\Desktop\\videoClase",
      "filename": "C:\\Users\\MICHELLE\\Desktop\\videoClase\\app.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "C:\\Users\\MICHELLE\\Desktop\\videoClase",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "C:\\Users\\MICHELLE\\Desktop\\videoClase\\app.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "C:\\Users\\MICHELLE\\Desktop\\videoClase\\app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "C:\\Users\\MICHELLE\\Desktop\\videoClase\\",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar bodyParser = _interopRequireWildcard(require(\"body-parser\"));\n\nvar path = _interopRequireWildcard(require(\"path\"));\n\nvar _multer = _interopRequireDefault(require(\"multer\"));\n\nvar _worker_threads = require(\"worker_threads\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nrequire('dotenv').config();\n\nconst storage = _multer.default.diskStorage({\n  destination: './uploads/',\n  filename: (req, file, cb) => {\n    cb(null, file.fieldname + '-' + Date.now() + path.extname(file.originalname));\n  }\n});\n\nconst upload = (0, _multer.default)({\n  dest: 'uploads',\n  storage: storage\n});\nconst app = (0, _express.default)();\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({\n  extended: false\n}));\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'hbs');\napp.get('/', (req, res) => {\n  res.render('index');\n});\napp.post('/upload-video', upload.single('ssvideo'), (req, res) => {\n  if (_worker_threads.isMainThread) {\n    let thread = new _worker_threads.Worker('./threads/worker.js', {\n      workerData: {\n        file: req.file.path,\n        filename: req.file.filename\n      }\n    });\n    thread.on('message', data => {\n      res.download(data.file, req.file.filename);\n    });\n    thread.on('error', err => {\n      console.log('Error en el thread', err);\n    });\n    thread.on('exit', code => {\n      if (code != 0) {\n        console.log(`El hilo se detuvo con el codigo de salida ${code}`);\n      }\n    });\n  }\n});\nconst PORT = 8080;\napp.listen(PORT, () => {\n  console.log(`El servidor se inicio en el puerto ${PORT}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwic3RvcmFnZSIsIm11bHRlciIsImRpc2tTdG9yYWdlIiwiZGVzdGluYXRpb24iLCJmaWxlbmFtZSIsInJlcSIsImZpbGUiLCJjYiIsImZpZWxkbmFtZSIsIkRhdGUiLCJub3ciLCJwYXRoIiwiZXh0bmFtZSIsIm9yaWdpbmFsbmFtZSIsInVwbG9hZCIsImRlc3QiLCJhcHAiLCJ1c2UiLCJib2R5UGFyc2VyIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInNldCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJnZXQiLCJyZXMiLCJyZW5kZXIiLCJwb3N0Iiwic2luZ2xlIiwiaXNNYWluVGhyZWFkIiwidGhyZWFkIiwiV29ya2VyIiwid29ya2VyRGF0YSIsIm9uIiwiZGF0YSIsImRvd25sb2FkIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNvZGUiLCJQT1JUIiwibGlzdGVuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQjs7QUFFQSxNQUFNQyxPQUFPLEdBQUdDLGdCQUFPQyxXQUFQLENBQW1CO0FBQy9CQyxFQUFBQSxXQUFXLEVBQUUsWUFEa0I7QUFFL0JDLEVBQUFBLFFBQVEsRUFBRSxDQUFDQyxHQUFELEVBQU1DLElBQU4sRUFBWUMsRUFBWixLQUFtQjtBQUN6QkEsSUFBQUEsRUFBRSxDQUFDLElBQUQsRUFBT0QsSUFBSSxDQUFDRSxTQUFMLEdBQWlCLEdBQWpCLEdBQXVCQyxJQUFJLENBQUNDLEdBQUwsRUFBdkIsR0FBb0NDLElBQUksQ0FBQ0MsT0FBTCxDQUFhTixJQUFJLENBQUNPLFlBQWxCLENBQTNDLENBQUY7QUFDSDtBQUo4QixDQUFuQixDQUFoQjs7QUFPQSxNQUFNQyxNQUFNLEdBQUcscUJBQU87QUFBQ0MsRUFBQUEsSUFBSSxFQUFFLFNBQVA7QUFBa0JmLEVBQUFBLE9BQU8sRUFBRUE7QUFBM0IsQ0FBUCxDQUFmO0FBRUEsTUFBTWdCLEdBQUcsR0FBRyx1QkFBWjtBQUNBQSxHQUFHLENBQUNDLEdBQUosQ0FBUUMsVUFBVSxDQUFDQyxJQUFYLEVBQVI7QUFDQUgsR0FBRyxDQUFDQyxHQUFKLENBQVFDLFVBQVUsQ0FBQ0UsVUFBWCxDQUFzQjtBQUFDQyxFQUFBQSxRQUFRLEVBQUU7QUFBWCxDQUF0QixDQUFSO0FBRUFMLEdBQUcsQ0FBQ00sR0FBSixDQUFRLE9BQVIsRUFBaUJYLElBQUksQ0FBQ1ksSUFBTCxDQUFVQyxTQUFWLEVBQXFCLE9BQXJCLENBQWpCO0FBQ0FSLEdBQUcsQ0FBQ00sR0FBSixDQUFRLGFBQVIsRUFBdUIsS0FBdkI7QUFFQU4sR0FBRyxDQUFDUyxHQUFKLENBQVEsR0FBUixFQUFhLENBQUNwQixHQUFELEVBQU1xQixHQUFOLEtBQWM7QUFDdkJBLEVBQUFBLEdBQUcsQ0FBQ0MsTUFBSixDQUFXLE9BQVg7QUFDSCxDQUZEO0FBSUFYLEdBQUcsQ0FBQ1ksSUFBSixDQUFTLGVBQVQsRUFBMEJkLE1BQU0sQ0FBQ2UsTUFBUCxDQUFjLFNBQWQsQ0FBMUIsRUFBb0QsQ0FBQ3hCLEdBQUQsRUFBTXFCLEdBQU4sS0FBYztBQUM5RCxNQUFHSSw0QkFBSCxFQUFnQjtBQUVaLFFBQUlDLE1BQU0sR0FBRyxJQUFJQyxzQkFBSixDQUFXLHFCQUFYLEVBQWtDO0FBQzNDQyxNQUFBQSxVQUFVLEVBQUU7QUFDUjNCLFFBQUFBLElBQUksRUFBRUQsR0FBRyxDQUFDQyxJQUFKLENBQVNLLElBRFA7QUFFUlAsUUFBQUEsUUFBUSxFQUFFQyxHQUFHLENBQUNDLElBQUosQ0FBU0Y7QUFGWDtBQUQrQixLQUFsQyxDQUFiO0FBT0EyQixJQUFBQSxNQUFNLENBQUNHLEVBQVAsQ0FBVSxTQUFWLEVBQXFCQyxJQUFJLElBQUk7QUFDekJULE1BQUFBLEdBQUcsQ0FBQ1UsUUFBSixDQUFhRCxJQUFJLENBQUM3QixJQUFsQixFQUF3QkQsR0FBRyxDQUFDQyxJQUFKLENBQVNGLFFBQWpDO0FBQ0gsS0FGRDtBQUlBMkIsSUFBQUEsTUFBTSxDQUFDRyxFQUFQLENBQVUsT0FBVixFQUFtQkcsR0FBRyxJQUFJO0FBQ3RCQyxNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxvQkFBWixFQUFrQ0YsR0FBbEM7QUFDSCxLQUZEO0FBSUFOLElBQUFBLE1BQU0sQ0FBQ0csRUFBUCxDQUFVLE1BQVYsRUFBa0JNLElBQUksSUFBRztBQUNyQixVQUFHQSxJQUFJLElBQUksQ0FBWCxFQUFhO0FBQ1RGLFFBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLDZDQUE0Q0MsSUFBSyxFQUE5RDtBQUNIO0FBQ0osS0FKRDtBQUtIO0FBRUosQ0F6QkQ7QUEyQkEsTUFBTUMsSUFBSSxHQUFHLElBQWI7QUFDQXpCLEdBQUcsQ0FBQzBCLE1BQUosQ0FBV0QsSUFBWCxFQUFpQixNQUFNO0FBQ25CSCxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBYSxzQ0FBcUNFLElBQUssRUFBdkQ7QUFDSCxDQUZEIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcTUlDSEVMTEVcXERlc2t0b3BcXHZpZGVvQ2xhc2VcXCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgKiBhcyBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcclxuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcclxuaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xyXG5pbXBvcnQgeyBXb3JrZXIsIGlzTWFpblRocmVhZCwgd29ya2VyRGF0YSB9IGZyb20gJ3dvcmtlcl90aHJlYWRzJztcclxuXHJcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xyXG5cclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XHJcbiAgICBkZXN0aW5hdGlvbjogJy4vdXBsb2Fkcy8nLFxyXG4gICAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICAgICAgY2IobnVsbCwgZmlsZS5maWVsZG5hbWUgKyAnLScgKyBEYXRlLm5vdygpICsgcGF0aC5leHRuYW1lKGZpbGUub3JpZ2luYWxuYW1lKSlcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCB1cGxvYWQgPSBtdWx0ZXIoe2Rlc3Q6ICd1cGxvYWRzJywgc3RvcmFnZTogc3RvcmFnZX0pO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcclxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoe2V4dGVuZGVkOiBmYWxzZX0pKTtcclxuXHJcbmFwcC5zZXQoJ3ZpZXdzJywgcGF0aC5qb2luKF9fZGlybmFtZSwgJ3ZpZXdzJykpO1xyXG5hcHAuc2V0KCd2aWV3IGVuZ2luZScsICdoYnMnKTtcclxuXHJcbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcclxuICAgIHJlcy5yZW5kZXIoJ2luZGV4JylcclxufSk7XHJcblxyXG5hcHAucG9zdCgnL3VwbG9hZC12aWRlbycsIHVwbG9hZC5zaW5nbGUoJ3NzdmlkZW8nKSwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBpZihpc01haW5UaHJlYWQpe1xyXG5cclxuICAgICAgICBsZXQgdGhyZWFkID0gbmV3IFdvcmtlcignLi90aHJlYWRzL3dvcmtlci5qcycsIHsgXHJcbiAgICAgICAgICAgIHdvcmtlckRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGZpbGU6IHJlcS5maWxlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcmVxLmZpbGUuZmlsZW5hbWVcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhyZWFkLm9uKCdtZXNzYWdlJywgZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHJlcy5kb3dubG9hZChkYXRhLmZpbGUsIHJlcS5maWxlLmZpbGVuYW1lKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhyZWFkLm9uKCdlcnJvcicsIGVyciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBlbiBlbCB0aHJlYWQnLCBlcnIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aHJlYWQub24oJ2V4aXQnLCBjb2RlID0+e1xyXG4gICAgICAgICAgICBpZihjb2RlICE9IDApe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEVsIGhpbG8gc2UgZGV0dXZvIGNvbiBlbCBjb2RpZ28gZGUgc2FsaWRhICR7Y29kZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufSk7XHJcblxyXG5jb25zdCBQT1JUID0gODA4MDtcclxuYXBwLmxpc3RlbihQT1JULCAoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhgRWwgc2Vydmlkb3Igc2UgaW5pY2lvIGVuIGVsIHB1ZXJ0byAke1BPUlR9YCk7XHJcbn0pOyJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "require",
        "config",
        "storage",
        "multer",
        "diskStorage",
        "destination",
        "filename",
        "req",
        "file",
        "cb",
        "fieldname",
        "Date",
        "now",
        "path",
        "extname",
        "originalname",
        "upload",
        "dest",
        "app",
        "use",
        "bodyParser",
        "json",
        "urlencoded",
        "extended",
        "set",
        "join",
        "__dirname",
        "get",
        "res",
        "render",
        "post",
        "single",
        "isMainThread",
        "thread",
        "Worker",
        "workerData",
        "on",
        "data",
        "download",
        "err",
        "console",
        "log",
        "code",
        "PORT",
        "listen"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAEA,MAAMC,OAAO,GAAGC,gBAAOC,WAAP,CAAmB;AAC/BC,EAAAA,WAAW,EAAE,YADkB;AAE/BC,EAAAA,QAAQ,EAAE,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AACzBA,IAAAA,EAAE,CAAC,IAAD,EAAOD,IAAI,CAACE,SAAL,GAAiB,GAAjB,GAAuBC,IAAI,CAACC,GAAL,EAAvB,GAAoCC,IAAI,CAACC,OAAL,CAAaN,IAAI,CAACO,YAAlB,CAA3C,CAAF;AACH;AAJ8B,CAAnB,CAAhB;;AAOA,MAAMC,MAAM,GAAG,qBAAO;AAACC,EAAAA,IAAI,EAAE,SAAP;AAAkBf,EAAAA,OAAO,EAAEA;AAA3B,CAAP,CAAf;AAEA,MAAMgB,GAAG,GAAG,uBAAZ;AACAA,GAAG,CAACC,GAAJ,CAAQC,UAAU,CAACC,IAAX,EAAR;AACAH,GAAG,CAACC,GAAJ,CAAQC,UAAU,CAACE,UAAX,CAAsB;AAACC,EAAAA,QAAQ,EAAE;AAAX,CAAtB,CAAR;AAEAL,GAAG,CAACM,GAAJ,CAAQ,OAAR,EAAiBX,IAAI,CAACY,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAjB;AACAR,GAAG,CAACM,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AAEAN,GAAG,CAACS,GAAJ,CAAQ,GAAR,EAAa,CAACpB,GAAD,EAAMqB,GAAN,KAAc;AACvBA,EAAAA,GAAG,CAACC,MAAJ,CAAW,OAAX;AACH,CAFD;AAIAX,GAAG,CAACY,IAAJ,CAAS,eAAT,EAA0Bd,MAAM,CAACe,MAAP,CAAc,SAAd,CAA1B,EAAoD,CAACxB,GAAD,EAAMqB,GAAN,KAAc;AAC9D,MAAGI,4BAAH,EAAgB;AAEZ,QAAIC,MAAM,GAAG,IAAIC,sBAAJ,CAAW,qBAAX,EAAkC;AAC3CC,MAAAA,UAAU,EAAE;AACR3B,QAAAA,IAAI,EAAED,GAAG,CAACC,IAAJ,CAASK,IADP;AAERP,QAAAA,QAAQ,EAAEC,GAAG,CAACC,IAAJ,CAASF;AAFX;AAD+B,KAAlC,CAAb;AAOA2B,IAAAA,MAAM,CAACG,EAAP,CAAU,SAAV,EAAqBC,IAAI,IAAI;AACzBT,MAAAA,GAAG,CAACU,QAAJ,CAAaD,IAAI,CAAC7B,IAAlB,EAAwBD,GAAG,CAACC,IAAJ,CAASF,QAAjC;AACH,KAFD;AAIA2B,IAAAA,MAAM,CAACG,EAAP,CAAU,OAAV,EAAmBG,GAAG,IAAI;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,GAAlC;AACH,KAFD;AAIAN,IAAAA,MAAM,CAACG,EAAP,CAAU,MAAV,EAAkBM,IAAI,IAAG;AACrB,UAAGA,IAAI,IAAI,CAAX,EAAa;AACTF,QAAAA,OAAO,CAACC,GAAR,CAAa,6CAA4CC,IAAK,EAA9D;AACH;AACJ,KAJD;AAKH;AAEJ,CAzBD;AA2BA,MAAMC,IAAI,GAAG,IAAb;AACAzB,GAAG,CAAC0B,MAAJ,CAAWD,IAAX,EAAiB,MAAM;AACnBH,EAAAA,OAAO,CAACC,GAAR,CAAa,sCAAqCE,IAAK,EAAvD;AACH,CAFD",
      "sourceRoot": "C:\\Users\\MICHELLE\\Desktop\\videoClase\\",
      "sourcesContent": [
        "import express from 'express';\r\nimport * as bodyParser from 'body-parser';\r\nimport * as path from 'path';\r\nimport multer from 'multer';\r\nimport { Worker, isMainThread, workerData } from 'worker_threads';\r\n\r\nrequire('dotenv').config();\r\n\r\nconst storage = multer.diskStorage({\r\n    destination: './uploads/',\r\n    filename: (req, file, cb) => {\r\n        cb(null, file.fieldname + '-' + Date.now() + path.extname(file.originalname))\r\n    }\r\n});\r\n\r\nconst upload = multer({dest: 'uploads', storage: storage});\r\n\r\nconst app = express();\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({extended: false}));\r\n\r\napp.set('views', path.join(__dirname, 'views'));\r\napp.set('view engine', 'hbs');\r\n\r\napp.get('/', (req, res) => {\r\n    res.render('index')\r\n});\r\n\r\napp.post('/upload-video', upload.single('ssvideo'), (req, res) => {\r\n    if(isMainThread){\r\n\r\n        let thread = new Worker('./threads/worker.js', { \r\n            workerData: {\r\n                file: req.file.path,\r\n                filename: req.file.filename\r\n            } \r\n        });\r\n\r\n        thread.on('message', data => {\r\n            res.download(data.file, req.file.filename);\r\n        });\r\n\r\n        thread.on('error', err => {\r\n            console.log('Error en el thread', err);\r\n        });\r\n\r\n        thread.on('exit', code =>{\r\n            if(code != 0){\r\n                console.log(`El hilo se detuvo con el codigo de salida ${code}`);\r\n            }\r\n        });\r\n    }\r\n\r\n});\r\n\r\nconst PORT = 8080;\r\napp.listen(PORT, () => {\r\n    console.log(`El servidor se inicio en el puerto ${PORT}`);\r\n});"
      ]
    },
    "sourceType": "script",
    "mtime": 1635372767006
  }
}